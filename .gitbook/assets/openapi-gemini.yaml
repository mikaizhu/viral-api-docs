openapi: 3.0.3
info:
  title: Gemini Native API
  description: Gemini Native API supports text generation, multi-turn conversations, image understanding, PDF analysis, and multimodal capabilities. Supports both streaming and non-streaming output modes.
  version: 1.0.0
  contact:
    name: ViralAPI Support
    url: https://viralapi.ai/api-key

servers:
  - url: https://viralapi.ai
    description: Production server

security:
  - BearerAuth: []

tags:
  - name: Gemini
    description: Gemini Native API with multimodal content generation

paths:
  /v1beta/models/{model}:generateContent:
    post:
      tags:
        - Gemini
      summary: Generate Content
      description: Non-streaming content generation. Returns complete response at once. Supports text conversations, image understanding, PDF analysis, and multimodal inputs.
      operationId: generateContent
      security:
        - BearerAuth: []
      parameters:
        - name: model
          in: path
          required: true
          description: Model name
          schema:
            type: string
            enum:
              - gemini-3-pro-preview-thinking
              - gemini-3-pro-preview
              - gemini-3-flash-preview
          example: gemini-3-flash-preview
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - contents
              properties:
                contents:
                  type: array
                  description: Conversation content array, supports multi-turn conversations
                  items:
                    type: object
                    required:
                      - role
                      - parts
                    properties:
                      role:
                        type: string
                        description: Role identifier. user for user messages, model for model responses
                        enum:
                          - user
                          - model
                      parts:
                        type: array
                        description: Content parts array, can include text, images, PDFs, etc.
                        items:
                          type: object
                          properties:
                            text:
                              type: string
                              description: Text content
                            inline_data:
                              type: object
                              description: Inline binary data (images, PDFs, etc.)
                              properties:
                                mime_type:
                                  type: string
                                  description: "MIME type. Supports image/jpeg, image/png, image/gif, image/webp, application/pdf"
                                  enum:
                                    - image/jpeg
                                    - image/png
                                    - image/gif
                                    - image/webp
                                    - application/pdf
                                data:
                                  type: string
                                  description: Base64-encoded file data
                generationConfig:
                  type: object
                  description: Generation configuration parameters
                  properties:
                    maxOutputTokens:
                      type: integer
                      description: Maximum output tokens
                      default: 8192
                      example: 16384
                    temperature:
                      type: number
                      description: Temperature value (0-2). Higher values produce more random output
                      minimum: 0
                      maximum: 2
                      default: 0.7
                      example: 0.7
                    topP:
                      type: number
                      description: Nucleus sampling parameter
                      minimum: 0
                      maximum: 1
                      example: 0.95
                    topK:
                      type: integer
                      description: Top-k sampling parameter
                      minimum: 1
                      example: 40
            example:
              contents:
                - role: user
                  parts:
                    - text: "Hello, please introduce yourself"
              generationConfig:
                maxOutputTokens: 16384
                temperature: 0.7
      responses:
        "200":
          description: Generation successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenerateContentResponse'
              example:
                candidates:
                  - content:
                      parts:
                        - text: "Hello! I'm Gemini, a multimodal AI assistant developed by Google. I can help you with various tasks, including answering questions, analyzing images, understanding documents, and more. How can I assist you today?"
                      role: model
                    finishReason: STOP
                    index: 0
                usageMetadata:
                  promptTokenCount: 10
                  candidatesTokenCount: 85
                  totalTokenCount: 95
        "400":
          $ref: '#/components/responses/BadRequest'
        "401":
          $ref: '#/components/responses/Unauthorized'
        "403":
          $ref: '#/components/responses/Forbidden'
        "500":
          $ref: '#/components/responses/ServerError'

  /v1beta/models/{model}:streamGenerateContent:
    post:
      tags:
        - Gemini
      summary: Stream Generate Content
      description: Streaming content generation. Returns responses progressively via SSE (Server-Sent Events). Suitable for long text generation scenarios where users can see the generation process in real-time. Requires ?alt=sse query parameter.
      operationId: streamGenerateContent
      security:
        - BearerAuth: []
      parameters:
        - name: model
          in: path
          required: true
          description: Model name
          schema:
            type: string
            enum:
              - gemini-3-pro-preview-thinking
              - gemini-3-pro-preview
              - gemini-3-flash-preview
          example: gemini-3-flash-preview
        - name: alt
          in: query
          required: true
          description: Output format, must be set to sse to enable streaming output
          schema:
            type: string
            enum:
              - sse
          example: sse
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - contents
              properties:
                contents:
                  type: array
                  description: Conversation content array, supports multi-turn conversations
                  items:
                    type: object
                    required:
                      - role
                      - parts
                    properties:
                      role:
                        type: string
                        description: Role identifier. user for user messages, model for model responses
                        enum:
                          - user
                          - model
                      parts:
                        type: array
                        description: Content parts array, can include text, images, PDFs, etc.
                        items:
                          type: object
                          properties:
                            text:
                              type: string
                              description: Text content
                            inline_data:
                              type: object
                              description: Inline binary data (images, PDFs, etc.)
                              properties:
                                mime_type:
                                  type: string
                                  description: MIME 类型
                                  enum:
                                    - image/jpeg
                                    - image/png
                                    - image/gif
                                    - image/webp
                                    - application/pdf
                                data:
                                  type: string
                                  description: Base64-encoded file data
                generationConfig:
                  type: object
                  description: Generation configuration parameters
                  properties:
                    maxOutputTokens:
                      type: integer
                      description: Maximum output tokens
                      default: 8192
                      example: 16384
                    temperature:
                      type: number
                      description: Temperature value (0-2). Higher values produce more random output
                      minimum: 0
                      maximum: 2
                      default: 0.7
                      example: 0.7
                    topP:
                      type: number
                      description: Nucleus sampling parameter
                      minimum: 0
                      maximum: 1
                      example: 0.95
                    topK:
                      type: integer
                      description: Top-k sampling parameter
                      minimum: 1
                      example: 40
            example:
              contents:
                - role: user
                  parts:
                    - text: "Write an article about AI"
              generationConfig:
                maxOutputTokens: 16384
                temperature: 0.7
      responses:
        "200":
          description: Streaming generation successful, returns SSE event stream
          content:
            text/event-stream:
              schema:
                type: string
                description: SSE format event stream, each event contains partial generated content
              example: |
                data: {"candidates":[{"content":{"parts":[{"text":"Artificial Intelligence"}],"role":"model"},"index":0}]}

                data: {"candidates":[{"content":{"parts":[{"text":" (AI) is"}],"role":"model"},"index":0}]}

                data: {"candidates":[{"content":{"parts":[{"text":" transforming the world..."}],"role":"model"},"finishReason":"STOP","index":0}],"usageMetadata":{"promptTokenCount":12,"candidatesTokenCount":500,"totalTokenCount":512}}
        "400":
          $ref: '#/components/responses/BadRequest'
        "401":
          $ref: '#/components/responses/Unauthorized'
        "403":
          $ref: '#/components/responses/Forbidden'
        "500":
          $ref: '#/components/responses/ServerError'

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: Authenticate using Bearer Token. Get API Key at https://viralapi.ai/api-key

  schemas:
    GenerateContentResponse:
      type: object
      properties:
        candidates:
          type: array
          description: Candidate responses array
          items:
            type: object
            properties:
              content:
                type: object
                properties:
                  parts:
                    type: array
                    items:
                      type: object
                      properties:
                        text:
                          type: string
                          description: Generated text content
                  role:
                    type: string
                    description: Role identifier, fixed as model
                    enum:
                      - model
              finishReason:
                type: string
                description: Finish reason
                enum:
                  - STOP
                  - MAX_TOKENS
                  - SAFETY
                  - RECITATION
                  - OTHER
              index:
                type: integer
                description: Candidate index
        usageMetadata:
          type: object
          description: Token usage statistics
          properties:
            promptTokenCount:
              type: integer
              description: Input prompt token count
            candidatesTokenCount:
              type: integer
              description: Generated content token count
            totalTokenCount:
              type: integer
              description: Total token count

    ErrorResponse:
      type: object
      required:
        - code
        - error
      properties:
        code:
          type: integer
          description: HTTP status code
        error:
          type: object
          required:
            - message
            - status
          properties:
            message:
              type: string
              description: Error message
            status:
              type: string
              description: Error status

  responses:
    BadRequest:
      description: Invalid request parameters
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            code: 400
            error:
              message: "Invalid request parameters"
              status: INVALID_ARGUMENT
    Unauthorized:
      description: Authentication failed
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            code: 401
            error:
              message: "Invalid or missing API key"
              status: UNAUTHENTICATED
    Forbidden:
      description: Insufficient permissions
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            code: 403
            error:
              message: "Access denied for this model"
              status: PERMISSION_DENIED
    ServerError:
      description: Internal server error
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            code: 500
            error:
              message: "Internal server error"
              status: INTERNAL
