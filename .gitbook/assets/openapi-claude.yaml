openapi: 3.0.3
info:
  title: Claude Native API
  description: Claude Native API supports text generation, multi-turn conversations, image understanding, and multimodal capabilities. Supports both streaming and non-streaming output modes.
  version: 1.0.0
  contact:
    name: ViralAPI Support
    url: https://viralapi.ai/api-key

servers:
  - url: https://viralapi.ai
    description: Production server

security:
  - BearerAuth: []

tags:
  - name: Claude
    description: Claude Native API with multimodal content generation

paths:
  /v1/messages:
    post:
      tags:
        - Claude
      summary: Create Message
      description: Create conversation messages with text, images, and multimodal inputs. Control streaming output via the stream parameter.
      operationId: createMessage
      security:
        - BearerAuth: []
      parameters:
        - name: anthropic-version
          in: header
          required: true
          description: API version number, must be set to 2023-06-01
          schema:
            type: string
            enum:
              - "2023-06-01"
          example: "2023-06-01"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - model
                - max_tokens
                - messages
              properties:
                model:
                  type: string
                  description: Model name
                  enum:
                    - claude-opus-4-20250514
                    - claude-sonnet-4-20250514
                    - claude-opus-4-5-20251101
                    - claude-3-5-haiku-20241022
                  example: claude-opus-4-5-20251101
                max_tokens:
                  type: integer
                  description: Maximum output tokens (required)
                  minimum: 1
                  maximum: 8192
                  example: 4096
                messages:
                  type: array
                  description: Conversation messages array
                  items:
                    type: object
                    required:
                      - role
                      - content
                    properties:
                      role:
                        type: string
                        description: Role identifier. user for user messages, assistant for assistant responses
                        enum:
                          - user
                          - assistant
                      content:
                        oneOf:
                          - type: string
                            description: Plain text content
                          - type: array
                            description: Multimodal content array (text + images)
                            items:
                              type: object
                              properties:
                                type:
                                  type: string
                                  enum:
                                    - text
                                    - image
                                text:
                                  type: string
                                  description: Text content (when type is text)
                                source:
                                  type: object
                                  description: Image source (when type is image)
                                  properties:
                                    type:
                                      type: string
                                      enum:
                                        - base64
                                        - url
                                    media_type:
                                      type: string
                                      description: Image MIME type (required for base64 method)
                                      enum:
                                        - image/jpeg
                                        - image/png
                                        - image/gif
                                        - image/webp
                                    data:
                                      type: string
                                      description: Base64-encoded image data (for base64 method)
                                    url:
                                      type: string
                                      description: Image URL (for url method)
                system:
                  type: string
                  description: System prompt
                  example: "You are a professional translation assistant."
                temperature:
                  type: number
                  description: Temperature value (0-1). Higher values produce more random output
                  minimum: 0
                  maximum: 1
                  default: 1.0
                  example: 0.7
                top_p:
                  type: number
                  description: Nucleus sampling parameter
                  minimum: 0
                  maximum: 1
                top_k:
                  type: integer
                  description: Top-k sampling parameter
                  minimum: 1
                stream:
                  type: boolean
                  description: Enable streaming output
                  default: false
                  example: false
                stop_sequences:
                  type: array
                  description: Stop sequences
                  items:
                    type: string
            example:
              model: claude-opus-4-5-20251101
              max_tokens: 4096
              messages:
                - role: user
                  content:
                    - type: image
                      source:
                        type: url
                        url: "https://example.com/image.jpg"
                    - type: text
                      text: "Please describe this image"
      responses:
        "200":
          description: Generation successful
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MessageResponse"
              example:
                id: "msg_01XFDUDYJgAACzvnptvVoYEL"
                type: message
                role: assistant
                content:
                  - type: text
                    text: "Hello! I'm Claude, an AI assistant developed by Anthropic. I can help you with various tasks, including answering questions, analyzing content, writing code, and more. How can I assist you today?"
                model: claude-opus-4-5-20251101
                stop_reason: end_turn
                usage:
                  input_tokens: 12
                  output_tokens: 85
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/Forbidden"
        "500":
          $ref: "#/components/responses/ServerError"

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: Authenticate using Bearer Token. Get API Key at https://viralapi.ai/api-key

  schemas:
    MessageResponse:
      type: object
      properties:
        id:
          type: string
          description: Message ID
          example: "msg_01XFDUDYJgAACzvnptvVoYEL"
        type:
          type: string
          description: Response type
          enum:
            - message
          example: message
        role:
          type: string
          description: Role, fixed as assistant
          enum:
            - assistant
          example: assistant
        content:
          type: array
          description: Response content array
          items:
            type: object
            properties:
              type:
                type: string
                enum:
                  - text
              text:
                type: string
                description: Generated text content
        model:
          type: string
          description: Model name used
          example: claude-opus-4-5-20251101
        stop_reason:
          type: string
          description: Stop reason
          enum:
            - end_turn
            - max_tokens
            - stop_sequence
          example: end_turn
        usage:
          type: object
          description: Token usage statistics
          properties:
            input_tokens:
              type: integer
              description: Input token count
            output_tokens:
              type: integer
              description: Output token count

    ErrorResponse:
      type: object
      required:
        - code
        - error
      properties:
        code:
          type: integer
          description: HTTP status code
        error:
          type: object
          required:
            - message
            - type
          properties:
            message:
              type: string
              description: Error message
            type:
              type: string
              description: Error type identifier

  responses:
    BadRequest:
      description: Invalid request parameters
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorResponse"
          example:
            code: 400
            error:
              message: "Invalid request parameters"
              type: invalid_request_error
    Unauthorized:
      description: Authentication failed
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorResponse"
          example:
            code: 401
            error:
              message: "Invalid or missing API key"
              type: authentication_error
    Forbidden:
      description: Insufficient permissions
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorResponse"
          example:
            code: 403
            error:
              message: "Access denied for this model"
              type: permission_error
    ServerError:
      description: Internal server error
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorResponse"
          example:
            code: 500
            error:
              message: "Internal server error"
              type: server_error
